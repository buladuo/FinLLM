default: 1
type: sql_reason

prompts:
  - id: 1
    content: | 
        你将扮演一位经验丰富的 SQL 专家，帮助分析以下 SQL 查询的编写过程，在多轮对话中帮助分析 SQL 查询的编写过程。每次我向你提问时，你只需回答当前问题，并基于必要的情况下参考之前的回答（如日期、InnerCode等）。请从以下几个方面进行详细分析，并假设这是你自己编写的 SQL 查询，逐步阐述每个选择的原因。
        ### 1. **表格字段分析**  
        首先，根据提供的表格 JSON 描述，列出该表格中的所有字段。然后，分析每个字段是否对解决问题有帮助，并简要说明为什么有帮助或者没有帮助。例如，字段可能直接参与查询的 SELECT 语句，或者帮助限定 WHERE 条件。

        - **分析内容**：列出所有字段，说明它们的作用。
        - **输出格式**：用原始文字说明每个字段的分析，不要直接使用 JSON 格式。

        ### 2. **字段取值分析**  
        请分析每个字段的取值范围，并假设每个字段的可能值。然后解释你如何选择适合的字段值来满足查询需求。考虑数据的分布、类型等因素，选择最合适的值来过滤和查询。

        - **分析内容**：详细列出字段的取值范围及选择理由。
        - **输出格式**：使用文字详细说明如何选择字段的取值范围。

        ### 3. **查询字段选择**  
        确定你需要查询哪些字段，并详细说明为什么选择这些字段。考虑查询的目标是什么，它需要返回哪些信息，哪些字段是必需的，哪些字段可以省略。

        - **分析内容**：分析哪些字段是查询的关键。
        - **输出格式**：用文字说明每个字段是否必选以及为什么。

        ### 4. **查询限制条件**  
        请确定查询的限制条件。基于给定问题，选择适当的条件来过滤数据，并解释每个条件的必要性。例如，限制查询的时间范围、某些字段的特定值、或者某些字段的比较。每个条件都需要详细说明为何这样选择。

        - **分析内容**：说明每个查询条件选择的理由。
        - **输出格式**：使用文字分析每个限制条件。

        ### 5. **最终输出**  
        在前述分析完成后，最后请将所有的理由和 SQL 片段按照以下json格式输出，确保结构正确并符合以下要求：

        ```json
        [{"reason": "你整理好的完整的理由描述，包括选取的字段、限制字段的取值（尤其是取值的原因、含义是什么？），字段的格式控制",
        "sql": "我提供的sql"}]
        ```

        ---

        **注意**：
        - 一些innercode和companycode字段作为限制条件取值是我实现查询得到的，不必考虑他们的取值。但是如果他们再查询的目标字段就不一样了。
        - 我提供的SQL就是正确答案，不要进行任何纠错尝试，我的sql保证正确！
        - 请确保分析过程清晰而详细，但最终输出必须严格符合指定的 JSON 格式。
        - 在最终的 JSON 输出中，每个对象的 `reason` 字段需要阐明完整的分析，`sql` 字段则是该分析项对应的 SQL 片段。
        - 在每个问题的回答中，你只需回答当前问题，并且参考之前的上下文（如日期、InnerCode等）时，仅在必要时使用之前的答案。最终的答案里面只能针对当前的问题进行回复分析的理由。
        - **切记**：在分析部分使用原始文字描述，最终答案必须转换为符合格式的 JSON 输出,我提供的sql能够查询出正确的答案。