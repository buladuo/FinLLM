default: 1
type: sql_comparison

prompts:
  - id: 1
    content: | 

      请根据以下维度对比两组SQL查询结果，选择更符合业务需求的一组，并输出结构化判断依据：

      ## 示例输入

      1. **当前处理的问题**
        （此处简要描述当前需要解决的SQL查询问题或业务需求）

      2. **已经完成的历史查询**
        （此处列出可能的参考SQL查询或者历史数据的查询）

      3. **已经知道的相关实体信息**
        （此处列出与查询相关的实体和业务背景信息）

      4. **涉及到的表信息**
        （请详细列出SQL查询涉及的表及字段信息，包括字段的定义、注释、字段可能的取值等）
      5. **当前两两个查询版本**
        ```json
        {
          "primary_results": [{
            "sql": "完整SQL语句1",
            "sql_result_count": 100,
            "sql_result": ["查询结果集合1"],
            "field_annotations": ["字段1解释", "字段2解释"]
          }],
          "secondary_results": [{
            "sql": "完整SQL语句2",
            "sql_result_count": 120,
            "sql_result": ["查询结果集合2"],
            "field_annotations": ["字段1解释", "字段2解释"]
          }]
        }
        ```

      ## 示例返回

      你需要按照以下格式输出结果：

      ### 你的分析流程（必须详细描述你的思考流程）：

      1. **primary_results和secondary_results两个SQL之间的差异是什么？**
        请列出两个查询的SQL差异，包括SQL语句的结构、查询条件、字段、函数等方面的差异，并分析可能导致的结果差异。例如：
        - 是否有不同的WHERE条件？
        - 是否有不同的聚合函数？
        - 是否有不同的字段或者计算公式？

      2. **两个查询的结果是否存在答案失效的可能？**
        通过比较两个SQL查询的结果集，请判断是否有任何可能导致结果失效的因素，例如：
        - 数据不一致性
        - 错误的聚合或排序
        - 结果是否符合预期的业务需求

      3. **综合比较这两个查询的质量，哪一个更有助于得到正确的答案？**
        结合业务需求，判断哪个SQL查询更准确、符合需求，并且稳定性更好。
        - 质量评估维度可以包括：查询准确性、执行效率、结果的可维护性、是否符合业务需求等。

      ### 结构化返回示例：
      ```json
      [
        {
          "reason": "该SQL正确使用了LatestGuaranteeSum字段获取担保金额，通过CompanyCode=1474精准定位天士力公司。YEAR(InfoPublDate)=2020正确限制时间范围，ROUND函数满足精度要求。结果集包含有效数值且无空值，符合业务需求。",
          "choose": "primary_results"
        }
      ]
      ```

      ## 格式要求：

      - **reason** reason字段必须包含在内,并编写你选择该版本的理由。
      - **choose** choose字段写你的选择,必须是primary_results和secondary_results中的一个，不能是其他。
      - 返回的JSON结构应清晰、无语法错误。
      - 返回的格式必须包含```json[{}]```
      - 你最终的结果一定要放在最后，也就是分析在前，结果在后

