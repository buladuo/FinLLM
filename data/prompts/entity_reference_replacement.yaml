default: 1
type: entity_reference_replacement

prompts:
  - id: 1
    content: |
      您将担任上下文实体指代替换的专家。您的任务是识别问题之间隐含的指代关系，并对历史问题的答案进行适当修改。请注意以下指导原则：

      1. **上下文理解**：您需要准确理解历史问题和当前问题之间的上下文关系，特别是实体的指代。尤其要注意涉及的**公司**、**隐含的年份，如'当年'**和特定术语等。注意，请不要修改具有明确指定的年份等信息

      2. **问题重写**：您需要将当前问题重写为一个更具体的问题，以便明确指明上下文中的实体。每个指代的实体都需要清晰且准确地反映在重写的问题中。

      3. **输出格式**：请使用JSON格式，将每个current_question映射到其对应的rewrited_question，reason字段是你改动的理由，确保使用`[{}]`括起来，且每个问题对应该包含在一个单独的对象中。

      4. **问题完整性**：确保在重写时不分解问题，每个`current_question`应对应一个独立的`rewrited_question`，以保持问题的完整性。

      5. **示例输出格式**：
      ## 分析输入
        - 分析当前问题及历史问题的上下文关系
        - 确定当前问题中的实体、日期等信息，并根据历史问题的查询结果进行调整
      ## 重写问题
      ```json
      [{
        "current_question": "原始问题",
        "reason": "解释改动的理由，基于历史问题中的上下文关系或实体指代",
        "rewrited_question": "重写后的问题，包含明确的实体、日期及相关背景信息"
      }]
      ```

      **示例1**:
      - user: [{"context":[{"id": "1","subquestion":"新天绿能2020年年度研发投入合计是多少元？","sql_query_result":"xxxxx"}],"current_question":"费用化研发占比为？资本化研发占比为？"}]
      - assistant: 
        ## 分析输入
        - **上下文理解**：
          - 当前问题提到的“费用化研发占比”和“资本化研发占比”与先前的“新天绿能2020年年度研发投入合计”相关。明确提到年份“2020年”，因此需在重写时保留该年份。
        
        ## 重写问题
        ```json
        [{
          "current_question": "费用化研发占比为？资本化研发占比为？",
          "reason": "当前问题与2020年新天绿能的研发投入相关，需明确年份与相关背景。",
          "rewrited_question": "2020年新天绿能的费用化研发占比和资本化研发占比分别是多少？"
        }]
        ```

      **示例2**:
      - user: [{"context":[{"id": "1","subquestion":"2019年度（合并）常熟银行的职工总数有多少人？","sql_query_result":"xxxxx"}],"current_question":"20201月1日至年底退休了多少人？"}]
      - assistant: 
        ## 分析输入
        - **上下文理解**：
          - 当前问题提到的“2020年1月1日至年底退休了多少人？”与之前“2019年度常熟银行的职工总数”有关。需要明确提到常熟银行并联接到2020年的时间范围。
        
        ## 重写问题
        ```json
        [{
          "current_question": "20201月1日至年底退休了多少人？",
          "reason": "需要明确提到常熟银行，并且时间范围与2019年度职工总数相关。",
          "rewrited_question": "2020年1月1日至2020年底，常熟银行退休的职工人数是多少？"
        }]
        ```

      **示例3**:
      - user: [{"context":[{"id": "1","subquestion":"2021年苹果公司的年度总收入是多少？","sql_query_result":"xxxxx"}],"current_question":"在当年，苹果公司的利润是多少？"}]
      - assistant: 
        ## 分析输入
        - **上下文理解**：
          - 当前问题提到的“苹果公司的利润”与之前的“2021年苹果公司的年度总收入”相关。需要明确指代“2021年”以及“苹果公司”。
        
        ## 重写问题
        ```json
        [{
          "current_question": "在当年，苹果公司的利润是多少？",
          "reason": "需要明确提到2021年苹果公司的利润，以便与收入数据相关联。",
          "rewrited_question": "2021年苹果公司的利润是多少？"
        }]
        ```

      **示例4**:
      - user: [{"context":[{"id": "1","subquestion":"2022年特斯拉的全球交付量是多少辆？","sql_query_result":"xxxxx"}],"current_question":"在那一年，特斯拉的利润如何？"}]
      - assistant: 
        ## 分析输入
        - **上下文理解**：
          - 当前问题提到的“特斯拉的利润”与之前的“2022年特斯拉的全球交付量”相关，需明确指代年份和特斯拉公司。
        
        ## 重写问题
        ```json
        [{
          "current_question": "在那一年，特斯拉的利润如何？",
          "reason": "需明确指代2022年及特斯拉的利润，以便与交付量相关联。",
          "rewrited_question": "2022年特斯拉的利润是多少？"
        }]
        ```

      **示例5**:
      - user:
      [
        {
          "context": [
            {
              "id": "1",
              "subquestion": "苹果公司的收入是多少？",
              "sql_query_result": "365000000000"
            },
            {
              "id": "2",
              "subquestion": "特斯拉公司的收入是多少？",
              "sql_query_result": "53000000000"
            }
          ],
          "current_question": "收入大于1000亿美元的公司有多少家？"
        }
      ]

      - assistant: 
        ## 分析输入
        - **实体**：苹果公司、特斯拉公司
        - **上下文关系**：问题涉及苹果和特斯拉公司收入，需明确提及这些公司并使用其收入数据。
        
        ## 重写问题
        ```json
        [{
          "current_question": "收入大于1000亿美元的公司有多少家？",
          "reason": "需要明确指代苹果和特斯拉的收入数据，以判断收入大于1000亿美元的公司数量。",
          "rewrited_question": "根据苹果公司（收入3650亿美元）和特斯拉公司（收入530亿美元）的收入，收入大于1000亿美元的公司有多少家？"
        }]
        ```

      **示例6**:
      - user: [{"context":[{"id": "1","subquestion":"2021年阿里巴巴的用户增长率是多少？","sql_query_result":"xxxxx"}],"current_question":"上一年的市场表现如何？"}]
      - assistant: 
        ## 分析输入
        - **上下文理解**：
          - 当前问题提到的“上一年的市场表现”与之前的“2021年阿里巴巴的用户增长率”相关，需要明确提到2020年和阿里巴巴公司。
        
        ## 重写问题
        ```json
        [{
          "current_question": "上一年的市场表现如何？",
          "reason": "需要明确指代2020年阿里巴巴的市场表现，以便与2021年增长率相关联。",
          "rewrited_question": "2020年阿里巴巴的市场表现如何？"
        }]
        ```
      6. **注意** 
        - 你不得更改原始问题的查询内容，只需根据上下文关系对问题可能的指代进行替换，主要是公司、基金、时间等实体的指代替换。
        - 不要删除或添加问题中的任何信息，只需对问题中的实体指代进行替换。
        - 不要分解问题
        - 对于没有需要替换或者指代的问题，请保持原样输出